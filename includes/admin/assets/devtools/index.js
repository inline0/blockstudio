(()=>{"use strict";const t=-1e4,e={phase:"idle",holdStartedAt:0,pointer:{x:t,y:t},detectedElement:null,detectedPath:null,detectedTargetElement:null,detectedTagName:null,elementBounds:null,animatedBounds:null,grabbedBoxes:[]},n=new Set(["c","C","с","С","ȼ","Ȼ","ↄ","Ↄ","ᴄ","ᶜ","ⅽ","Ⅽ","ç","Ç","ć","Ć","č","Č","ĉ","Ĉ","ċ","Ċ"]),o=(t,e)=>"KeyC"===e||!(!t||1!==t.length)&&n.has(t);let i=null;const l=()=>(null!==i||(i=navigator.platform?.toUpperCase().indexOf("MAC")>=0||/Mac|iPhone|iPad|iPod/.test(navigator.userAgent)),i),s=t=>o(t.key,t.code)&&(t=>l()?t.metaKey:t.ctrlKey)(t);let a=null,r=new WeakMap;const d=t=>{if(t.hasAttribute("data-blockstudio-devtools"))return!0;const e=t.getRootNode();return e instanceof ShadowRoot&&e.host.hasAttribute("data-blockstudio-devtools")},c=t=>{if(d(t))return!1;const e=performance.now(),n=r.get(t);if(n&&e-n.timestamp<500)return n.isVisible;const o=window.getComputedStyle(t);if((t=>{const e=parseInt(t.zIndex,10);return"none"===t.pointerEvents&&"fixed"===t.position&&!isNaN(e)&&e>=2147483640})(o))return!1;if(((t,e)=>{const n=e.position;if("fixed"!==n&&"absolute"!==n)return!1;const o=t.getBoundingClientRect();if(!(o.width/window.innerWidth>=.9&&o.height/window.innerHeight>=.9))return!1;const i=e.backgroundColor;return"transparent"===i||"rgba(0, 0, 0, 0)"===i||parseFloat(e.opacity)<.1})(t,o))return!1;const i=((t,e)=>{const n=e||window.getComputedStyle(t);return"none"!==n.display&&"hidden"!==n.visibility&&parseFloat(n.opacity)>0})(t,o);return r.set(t,{isVisible:i,timestamp:e}),i},u=t=>{let e=t;for(;e;){if(d(e))return null;const t=e.getAttribute("data-blockstudio-path");if(t)return{element:e,path:t};e=e.parentElement}return null},h=t=>{const e=t.getBoundingClientRect(),n=window.getComputedStyle(t),o=parseFloat(n.borderRadius)||0;return{x:e.x,y:e.y,width:e.width,height:e.height,borderRadius:o}},p="210, 57, 192",y=`rgba(${p}, 1)`,g=`rgba(${p}, 0.5)`,m=`rgba(${p}, 0.08)`,b=.5,f=`rgba(${p}, 0.8)`,x=(t,e,n)=>t+(e-t)*n;let w=null,v=null,E=0,C=0,$=1,k=null;const R={crosshair:{canvas:null,context:null},selection:{canvas:null,context:null},element:{canvas:null,context:null},grabbed:{canvas:null,context:null}};let S=null,T=null,A=[];const M=(t,e,n)=>{const o=new OffscreenCanvas(t*n,e*n),i=o.getContext("2d");return i&&i.scale(n,n),{canvas:o,context:i}},B=()=>{if(w){$=Math.max(window.devicePixelRatio||1,2),E=window.innerWidth,C=window.innerHeight,w.width=E*$,w.height=C*$,w.style.width=`${E}px`,w.style.height=`${C}px`,v=w.getContext("2d"),v&&v.scale($,$);for(const t of Object.keys(R))R[t]=M(E,C,$)}},P=(t,e,n,o,i,l,s,a,r=1)=>{if(o<=0||i<=0)return;const d=Math.min(o/2,i/2),c=Math.min(l,d);t.globalAlpha=r,t.beginPath(),c>0?t.roundRect(e,n,o,i,c):t.rect(e,n,o,i),t.fillStyle=s,t.fill(),t.strokeStyle=a,t.lineWidth=1,t.stroke(),t.globalAlpha=1},I=(t,e)=>{const n=x(t.current.x,t.target.x,e),o=x(t.current.y,t.target.y,e),i=x(t.current.width,t.target.width,e),l=x(t.current.height,t.target.height,e),s=Math.abs(n-t.target.x)<b&&Math.abs(o-t.target.y)<b&&Math.abs(i-t.target.width)<b&&Math.abs(l-t.target.height)<b;return t.current.x=s?t.target.x:n,t.current.y=s?t.target.y:o,t.current.width=s?t.target.width:i,t.current.height=s?t.target.height:l,!s},N=()=>{let t=!1;S?.isInitialized&&I(S,.95)&&(t=!0);const n=Date.now();A=A.filter(e=>{if(e.isInitialized&&I(e,.95)&&(t=!0),e.createdAt){const o=n-e.createdAt;if(o>=1600)return!1;if(o>1500){const n=(o-1500)/100;e.opacity=1-n,t=!0}return!0}return e.opacity>0}),(()=>{if(!v||!w)return;v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,w.width,w.height),v.setTransform($,0,0,$,0,0),(()=>{const t=R.crosshair;if(!t.context)return;const n=t.context;n.clearRect(0,0,E,C),"active"===e.phase&&(n.strokeStyle=y,n.lineWidth=1,n.beginPath(),n.moveTo(e.pointer.x,0),n.lineTo(e.pointer.x,C),n.moveTo(0,e.pointer.y),n.lineTo(E,e.pointer.y),n.stroke())})(),(()=>{const t=R.selection;if(!t.context)return;const n=t.context;n.clearRect(0,0,E,C),S&&"active"===e.phase&&P(n,S.current.x,S.current.y,S.current.width,S.current.height,S.borderRadius,m,g,S.opacity)})(),(()=>{const t=R.element;if(!t.context)return;const n=t.context;if(n.clearRect(0,0,E,C),!T||"active"!==e.phase)return;const{x:o,y:i,width:l,height:s,borderRadius:a}=T;if(l<=0||s<=0)return;const r=Math.min(l/2,s/2),d=Math.min(a,r);n.globalAlpha=1,n.setLineDash([4,4]),n.strokeStyle=f,n.lineWidth=1,n.beginPath(),d>0?n.roundRect(o,i,l,s,d):n.rect(o,i,l,s),n.stroke(),n.setLineDash([]),n.globalAlpha=1})(),(()=>{const t=R.grabbed;if(!t.context)return;const e=t.context;e.clearRect(0,0,E,C);for(const t of A)P(e,t.current.x,t.current.y,t.current.width,t.current.height,t.borderRadius,m,g,t.opacity)})();const t=["crosshair","selection","element","grabbed"];for(const e of t){const t=R[e];t.canvas&&v.drawImage(t.canvas,0,0,E,C)}})(),k=t?requestAnimationFrame(N):null},L=()=>{null===k&&(k=requestAnimationFrame(N))},z=t=>{if(!t)return S=null,void L();S?(S.target={x:t.x,y:t.y,width:t.width,height:t.height},S.borderRadius=t.borderRadius):S={id:"selection",current:{x:t.x,y:t.y,width:t.width,height:t.height},target:{x:t.x,y:t.y,width:t.width,height:t.height},borderRadius:t.borderRadius,opacity:1,isInitialized:!0},L()},F=t=>{T=t,L()},O=t=>{const e=t.replace(/\\/g,"/").split("/"),n=e.findIndex(t=>"themes"===t||"plugins"===t);return n>=0&&n+1<e.length?e.slice(n+1).join("/"):e.slice(-3).join("/")},D=(t,e)=>t.length>e?`${t.slice(0,e)}...`:t,X=t=>0===t.length?"":t.length<=2?t.map(t=>{return`<${e=t,(e.tagName||"").toLowerCase()} ...>`;var e}).join("\n  "):`(${t.length} elements)`,W=2147483647;let H=null,j=null,q=null,Y=null,K=null,U=null;const V=t=>{if(t<=0)return 8;const e=.2*t;return Math.max(4,Math.min(8,e))},_=()=>{const t=document.createElement("div");return t.setAttribute("data-blockstudio-devtools","arrow"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.zIndex="10",t},Z=(t,e,n,o)=>{const i=V(o);t.style.left=`calc(50% + ${n}px)`,t.style.borderLeft=`${i}px solid transparent`,t.style.borderRight=`${i}px solid transparent`,"bottom"===e?(t.style.top="0",t.style.bottom="",t.style.transform="translateX(-50%) translateY(-100%)",t.style.borderBottom=`${i}px solid white`,t.style.borderTop="none",t.style.filter="drop-shadow(-1px -1px 0 rgba(0,0,0,0.06)) drop-shadow(1px -1px 0 rgba(0,0,0,0.06))"):(t.style.top="",t.style.bottom="0",t.style.transform="translateX(-50%) translateY(100%)",t.style.borderTop=`${i}px solid white`,t.style.borderBottom="none",t.style.filter="drop-shadow(-1px 1px 0 rgba(0,0,0,0.06)) drop-shadow(1px 1px 0 rgba(0,0,0,0.06))")},G=(t,e,n,o,i=!1)=>{const l=window.innerWidth,s=window.innerHeight,a=V(n>0?n:100),r=e;let d=0;const c=t.y+t.height,u=t.y;if(n>0){const t=r-n/2,e=r+n/2;e>l-8&&(d=l-8-e),t+d<8&&(d=8-t)}const h=o+a+4;let p,y;if(i){const t=u-h;t>=8?(p=t,y="top"):(p=c+a+4,y="bottom")}else p=c+a+4,p+o<=s-8?y="bottom":(p=u-h,y="top");p<8&&(p=8);const g=n/2,m=g-d,b=Math.min(16,g),f=Math.max(n-16,g);return{left:r,top:p,arrowLeftOffset:Math.max(b,Math.min(f,m))-g,edgeOffsetX:d,arrowPosition:y}},J=()=>{H&&(H.style.display="none")},Q=()=>{Y&&(Y.style.display="none")},tt="data-blockstudio-devtools";let et=null,nt=null,ot=null,it=null,lt=null,st=null,at=!1,rt=null;const dt=()=>{e.phase="active",document.documentElement.style.cursor="crosshair",ot||(ot=(()=>{const t=document.querySelector(`[${tt}="host"]`);if(t?.shadowRoot){const e=t.shadowRoot.querySelector(`[${tt}="root"]`);if(e instanceof HTMLDivElement)return nt=t,it=t.shadowRoot.querySelector(`[${tt}="glow"]`)??null,e}const e=document.createElement("div");e.setAttribute(tt,"host"),e.style.zIndex="2147483646",e.style.position="fixed",e.style.inset="0",e.style.pointerEvents="none";const n=e.attachShadow({mode:"open"}),o=document.createElement("div");return o.setAttribute(tt,"root"),it=(()=>{const t=document.createElement("div");return t.setAttribute(tt,"glow"),t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.bottom="0",t.style.left="0",t.style.pointerEvents="none",t.style.zIndex=String(2147483645),t.style.opacity="0",t.style.transition="opacity 100ms ease-out",t.style.willChange="opacity",t.style.contain="strict",t.style.transform="translateZ(0)",t.style.boxShadow="inset 0 0 50px rgba(210, 57, 192, 0.15)",t})(),o.appendChild(it),n.appendChild(o),(document.body??document.documentElement).appendChild(e),nt=e,o})()),(t=>{w||(w=(()=>{const t=document.createElement("canvas");return t.setAttribute("data-blockstudio-devtools","overlay"),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.pointerEvents="none",t.style.zIndex=String(2147483645),t})(),t.appendChild(w)),B(),L()})(ot),it&&(it.style.opacity="1"),lt||(lt=document.createElement("style"),lt.setAttribute("data-blockstudio-pointer-override",""),lt.textContent="* { pointer-events: auto !important; }",document.head.appendChild(lt)),L()},ct=()=>{e.phase="idle",e.detectedElement=null,e.detectedPath=null,e.detectedTargetElement=null,e.detectedTagName=null,e.elementBounds=null,e.animatedBounds=null,document.documentElement.style.cursor="",k&&(cancelAnimationFrame(k),k=null),S=null,T=null,w&&v&&(v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,w.width,w.height)),J(),Q(),it&&(it.style.opacity="0"),a=null,r=new WeakMap,lt?.remove(),lt=null,at=!1,null!==rt&&(window.clearTimeout(rt),rt=null)},ut=()=>{if(!e.detectedPath||!e.animatedBounds)return;e.phase="copying",Q(),F(null);const t={id:`grabbed-${Date.now()}`,bounds:{...e.animatedBounds},createdAt:Date.now()};var n,o;e.grabbedBoxes.push(t),n=t,A.push({id:n.id,current:{x:n.bounds.x,y:n.bounds.y,width:n.bounds.width,height:n.bounds.height},target:{x:n.bounds.x,y:n.bounds.y,width:n.bounds.width,height:n.bounds.height},borderRadius:n.bounds.borderRadius,opacity:1,createdAt:n.createdAt,isInitialized:!0}),L(),o=e.detectedPath,j&&(j.textContent=`Copied: ${O(o)}`);(async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{return!1}})(((t,e,n)=>{const o=((t,e)=>{if(!(t instanceof HTMLElement))return`<${e} />`;let n="";for(const{name:e,value:o}of t.attributes)e.startsWith("data-blockstudio")||(n+=` ${e}="${D(o,15)}"`);const o=[],i=[];let l=!1;for(const e of t.childNodes)e.nodeType!==Node.COMMENT_NODE&&(e.nodeType===Node.TEXT_NODE?e.textContent&&e.textContent.trim().length>0&&(l=!0):e instanceof Element&&(l?i.push(e):o.push(e)));const s=t.innerText?.trim()??t.textContent?.trim()??"",a=D(s,100);let r="";const d=X(o);d&&(r+=`\n  ${d}`),a.length>0&&(r+=`\n  ${a}`);const c=X(i);return c&&(r+=`\n  ${c}`),r.length>0?`<${e}${n}>${r}\n</${e}>`:`<${e}${n} />`})(t,e);return`@<${e}>\n\n${o}\n  in ${O(n)}`})(e.detectedTargetElement??e.detectedElement,e.detectedTagName??"div",e.detectedPath)).then(()=>{e.phase="justCopied",setTimeout(()=>{e.grabbedBoxes=e.grabbedBoxes.filter(e=>e.id!==t.id),ct()},1500)})},ht=t=>{if(e.pointer.x=t.clientX,e.pointer.y=t.clientY,"active"!==e.phase)return;const n=((t,e)=>{const n=performance.now();if(a){const o=Math.abs(t-a.x),i=Math.abs(e-a.y),l=o<=2&&i<=2,s=n-a.timestamp<16;if(l||s)return a.result}const o=document.elementsFromPoint(t,e);let i=null;for(const t of o){if(!c(t))continue;const e=u(t);if(e){i={...e,targetElement:t,tagName:(t.tagName||"").toLowerCase()};break}}return a={x:t,y:e,result:i,timestamp:n},i})(t.clientX,t.clientY);if(n){e.detectedElement=n.element,e.detectedPath=n.path,e.detectedTargetElement=n.targetElement,e.detectedTagName=n.tagName;const o=h(n.element);if(e.animatedBounds=o,z(o),n.targetElement===n.element)e.elementBounds=null,F(null),Q();else{const o=h(n.targetElement);e.elementBounds=o,F(o),ot&&((t,e,n,o)=>{Y||(Y=(()=>{const t=document.createElement("div");return t.setAttribute("data-blockstudio-devtools","element-label"),t.style.position="fixed",t.style.zIndex=String(W),t.style.pointerEvents="none",t.style.filter="drop-shadow(0px 1px 2px rgba(81, 81, 81, 0.25))",t.style.userSelect="none",t.style.transition="opacity 100ms ease-out",t.style.opacity="1",U=_(),K=(()=>{const t=document.createElement("div");return t.setAttribute("data-blockstudio-devtools","element-panel"),t.style.display="flex",t.style.alignItems="center",t.style.borderRadius="8px",t.style.backgroundColor="white",t.style.width="fit-content",t.style.height="fit-content",t.style.padding="4px 7px",t.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',t.style.fontSize="12px",t.style.lineHeight="14px",t.style.fontWeight="500",t.style.color="rgba(0, 0, 0, 0.5)",t.style.whiteSpace="nowrap",t.style.webkitFontSmoothing="antialiased",t})(),t.appendChild(U),t.appendChild(K),t})(),o.appendChild(Y)),K&&(K.textContent=`<${t}>`),Y.style.display="block",Y.style.opacity="1";const i=Y.getBoundingClientRect(),l=K?.getBoundingClientRect(),s=l?.width??0,a=G(e,n,i.width,i.height,!0);Y.style.left=`${a.left}px`,Y.style.top=`${a.top}px`,Y.style.transform=`translateX(calc(-50% + ${a.edgeOffsetX}px))`,U&&Z(U,a.arrowPosition,a.arrowLeftOffset,s)})(n.tagName,o,t.clientX,ot)}ot&&((t,e,n,o)=>{H||(H=(()=>{const t=document.createElement("div");return t.setAttribute("data-blockstudio-devtools","label"),t.style.position="fixed",t.style.zIndex=String(W),t.style.pointerEvents="none",t.style.filter="drop-shadow(0px 1px 2px rgba(81, 81, 81, 0.25))",t.style.userSelect="none",t.style.transition="opacity 100ms ease-out",t.style.opacity="1",q=_(),j=(()=>{const t=document.createElement("div");return t.setAttribute("data-blockstudio-devtools","panel"),t.style.display="flex",t.style.alignItems="center",t.style.gap="5px",t.style.borderRadius="10px",t.style.backgroundColor="white",t.style.width="fit-content",t.style.height="fit-content",t.style.padding="6px 8px",t.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',t.style.fontSize="13px",t.style.lineHeight="16px",t.style.fontWeight="500",t.style.color="#000",t.style.whiteSpace="nowrap",t.style.webkitFontSmoothing="antialiased",t})(),t.appendChild(q),t.appendChild(j),t})(),o.appendChild(H)),j&&(j.textContent=O(t)),H.style.display="block",H.style.opacity="1";const i=H.getBoundingClientRect(),l=j?.getBoundingClientRect(),s=l?.width??0,a=G(e,n,i.width,i.height);H.style.left=`${a.left}px`,H.style.top=`${a.top}px`,H.style.transform=`translateX(calc(-50% + ${a.edgeOffsetX}px))`,q&&Z(q,a.arrowPosition,a.arrowLeftOffset,s)})(n.path,o,t.clientX,ot)}else e.detectedElement=null,e.detectedPath=null,e.detectedTargetElement=null,e.detectedTagName=null,e.elementBounds=null,e.animatedBounds=null,z(null),F(null),J(),Q();L()},pt=t=>{if(!(t=>{const e=t.target;if(!e)return!1;if(e.isContentEditable)return!0;const n=e.tagName?.toLowerCase();if("input"===n||"textarea"===n||"select"===n)return!0;const o=e.getAttribute("role");return"textbox"===o||"searchbox"===o})(t))return"active"===e.phase?"Escape"===t.key?void ct():s(t)&&!t.repeat?(t.preventDefault(),void ct()):void 0:void("idle"===e.phase&&s(t)&&(e.phase="holding",e.holdStartedAt=performance.now(),et=setTimeout(()=>{"holding"===e.phase&&dt()},100)))},yt=t=>{if("holding"===e.phase)return et&&(clearTimeout(et),et=null),void(e.phase="idle");at&&(t=>o(t.key,t.code)||(l()?"Meta"===t.key:"Control"===t.key))(t)&&(at=!1)},gt=t=>{0===t.button&&"active"===e.phase&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.detectedPath&&e.animatedBounds?ut():ct())},mt=t=>{"active"!==e.phase&&"copying"!==e.phase&&"justCopied"!==e.phase||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())},bt=()=>{B(),L()},ft=()=>{st=new AbortController;const t=st.signal;document.addEventListener("keydown",pt,{capture:!0,signal:t}),document.addEventListener("keyup",yt,{capture:!0,signal:t}),window.addEventListener("pointermove",ht,{passive:!0,signal:t}),window.addEventListener("pointerdown",gt,{capture:!0,signal:t}),window.addEventListener("click",mt,{capture:!0,signal:t}),window.addEventListener("resize",bt,{passive:!0,signal:t})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ft):ft()})();