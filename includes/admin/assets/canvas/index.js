(()=>{"use strict";var e={3072(e,t){var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case s:case i:case a:case p:return e;default:switch(e=e&&e.$$typeof){case l:case f:case h:case v:case c:return e;default:return t}}case o:return t}}}function S(e){return k(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=s,t.Lazy=h,t.Memo=v,t.Portal=o,t.Profiler=i,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||k(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return k(e)===l},t.isContextProvider=function(e){return k(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===f},t.isFragment=function(e){return k(e)===s},t.isLazy=function(e){return k(e)===h},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===o},t.isProfiler=function(e){return k(e)===i},t.isStrictMode=function(e){return k(e)===a},t.isSuspense=function(e){return k(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===i||e===a||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===g)},t.typeOf=k},3404(e,t,n){e.exports=n(3072)},4146(e,t,n){var r=n(3404),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function c(e){return r.isMemo(e)?a:i[e.$$typeof]||o}i[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[r.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(m){var o=p(n);o&&o!==m&&e(t,o,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var i=c(t),v=c(n),h=0;h<a.length;++h){var g=a[h];if(!(s[g]||r&&r[g]||v&&v[g]||i&&i[g])){var y=f(n,g);try{l(t,g,y)}catch(e){}}}}return t}},5338(e,t,n){var r=n(5795);t.H=r.createRoot,r.hydrateRoot},5795(e){e.exports=window.ReactDOM}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}var r=n(5338);const o=window.wp.blocks,s=window.React,a=window.wp.blockEditor,i=window.wp.components,c=window.wp.data,l=window.wp.primitives,u=window.ReactJSXRuntime;var d=(0,u.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(l.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),f=(0,u.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(l.Path,{d:"M11 13h2v-2h-2v2zm-6 0h2v-2H5v2zm12-2v2h2v-2h-2z"})}),p=(0,u.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(l.Path,{d:"M16.5 7.5 10 13.9l-2.5-2.4-1 1 3.5 3.6 7.5-7.6z"})}),m=n(5795);var v=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),h=Math.abs,g=String.fromCharCode,y=Object.assign;function w(e){return e.trim()}function b(e,t,n){return e.replace(t,n)}function k(e,t){return e.indexOf(t)}function S(e,t){return 0|e.charCodeAt(t)}function E(e,t,n){return e.slice(t,n)}function x(e){return e.length}function C(e){return e.length}function M(e,t){return t.push(e),e}var $=1,P=1,T=0,L=0,R=0,A="";function O(e,t,n,r,o,s,a){return{value:e,root:t,parent:n,type:r,props:o,children:s,line:$,column:P,length:a,return:""}}function N(e,t){return y(O("",null,null,"",null,null,0),e,{length:-e.length},t)}function B(){return R=L>0?S(A,--L):0,P--,10===R&&(P=1,$--),R}function _(){return R=L<T?S(A,L++):0,P++,10===R&&(P=1,$++),R}function I(){return S(A,L)}function z(){return L}function F(e,t){return E(A,e,t)}function j(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D(e){return $=P=1,T=x(A=e),L=0,[]}function q(e){return A="",e}function H(e){return w(F(L-1,G(91===e?e+2:40===e?e+1:e)))}function V(e){for(;(R=I())&&R<33;)_();return j(e)>2||j(R)>3?"":" "}function W(e,t){for(;--t&&_()&&!(R<48||R>102||R>57&&R<65||R>70&&R<97););return F(e,z()+(t<6&&32==I()&&32==_()))}function G(e){for(;_();)switch(R){case e:return L;case 34:case 39:34!==e&&39!==e&&G(R);break;case 40:41===e&&G(e);break;case 92:_()}return L}function U(e,t){for(;_()&&e+R!==57&&(e+R!==84||47!==I()););return"/*"+F(t,L-1)+"*"+g(47===e?e:_())}function J(e){for(;!j(I());)_();return F(e,L)}var X="-ms-",Y="-moz-",K="-webkit-",Z="comm",Q="rule",ee="decl",te="@keyframes";function ne(e,t){for(var n="",r=C(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function re(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ee:return e.return=e.return||e.value;case Z:return"";case te:return e.return=e.value+"{"+ne(e.children,r)+"}";case Q:e.value=e.props.join(",")}return x(n=ne(e.children,r))?e.return=e.value+"{"+n+"}":""}function oe(e){return q(se("",null,null,null,[""],e=D(e),0,[0],e))}function se(e,t,n,r,o,s,a,i,c){for(var l=0,u=0,d=a,f=0,p=0,m=0,v=1,h=1,y=1,w=0,E="",C=o,$=s,P=r,T=E;h;)switch(m=w,w=_()){case 40:if(108!=m&&58==S(T,d-1)){-1!=k(T+=b(H(w),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:T+=H(w);break;case 9:case 10:case 13:case 32:T+=V(m);break;case 92:T+=W(z()-1,7);continue;case 47:switch(I()){case 42:case 47:M(ie(U(_(),z()),t,n),c);break;default:T+="/"}break;case 123*v:i[l++]=x(T)*y;case 125*v:case 59:case 0:switch(w){case 0:case 125:h=0;case 59+u:-1==y&&(T=b(T,/\f/g,"")),p>0&&x(T)-d&&M(p>32?ce(T+";",r,n,d-1):ce(b(T," ","")+";",r,n,d-2),c);break;case 59:T+=";";default:if(M(P=ae(T,t,n,l,u,o,i,E,C=[],$=[],d),s),123===w)if(0===u)se(T,t,P,P,C,s,d,i,$);else switch(99===f&&110===S(T,3)?100:f){case 100:case 108:case 109:case 115:se(e,P,P,r&&M(ae(e,P,P,0,0,o,i,E,o,C=[],d),$),o,$,d,i,r?C:$);break;default:se(T,P,P,P,[""],$,0,i,$)}}l=u=p=0,v=y=1,E=T="",d=a;break;case 58:d=1+x(T),p=m;default:if(v<1)if(123==w)--v;else if(125==w&&0==v++&&125==B())continue;switch(T+=g(w),w*v){case 38:y=u>0?1:(T+="\f",-1);break;case 44:i[l++]=(x(T)-1)*y,y=1;break;case 64:45===I()&&(T+=H(_())),f=I(),u=d=x(E=T+=J(z())),w++;break;case 45:45===m&&2==x(T)&&(v=0)}}return s}function ae(e,t,n,r,o,s,a,i,c,l,u){for(var d=o-1,f=0===o?s:[""],p=C(f),m=0,v=0,g=0;m<r;++m)for(var y=0,k=E(e,d+1,d=h(v=a[m])),S=e;y<p;++y)(S=w(v>0?f[y]+" "+k:b(k,/&\f/g,f[y])))&&(c[g++]=S);return O(e,t,n,0===o?Q:i,c,l,u)}function ie(e,t,n){return O(e,t,n,Z,g(R),E(e,2,-2),0)}function ce(e,t,n,r){return O(e,t,n,ee,E(e,0,r),E(e,r+1,-1),r)}var le=function(e,t,n){for(var r=0,o=0;r=o,o=I(),38===r&&12===o&&(t[n]=1),!j(o);)_();return F(e,L)},ue=new WeakMap,de=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ue.get(n))&&!r){ue.set(e,!0);for(var o=[],s=function(e,t){return q(function(e,t){var n=-1,r=44;do{switch(j(r)){case 0:38===r&&12===I()&&(t[n]=1),e[n]+=le(L-1,t,n);break;case 2:e[n]+=H(r);break;case 4:if(44===r){e[++n]=58===I()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=g(r)}}while(r=_());return e}(D(e),t))}(t,o),a=n.props,i=0,c=0;i<s.length;i++)for(var l=0;l<a.length;l++,c++)e.props[c]=o[i]?s[i].replace(/&\f/g,a[l]):a[l]+" "+s[i]}}},fe=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function pe(e,t){switch(function(e,t){return 45^S(e,0)?(((t<<2^S(e,0))<<2^S(e,1))<<2^S(e,2))<<2^S(e,3):0}(e,t)){case 5103:return K+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return K+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return K+e+Y+e+X+e+e;case 6828:case 4268:return K+e+X+e+e;case 6165:return K+e+X+"flex-"+e+e;case 5187:return K+e+b(e,/(\w+).+(:[^]+)/,K+"box-$1$2"+X+"flex-$1$2")+e;case 5443:return K+e+X+"flex-item-"+b(e,/flex-|-self/,"")+e;case 4675:return K+e+X+"flex-line-pack"+b(e,/align-content|flex-|-self/,"")+e;case 5548:return K+e+X+b(e,"shrink","negative")+e;case 5292:return K+e+X+b(e,"basis","preferred-size")+e;case 6060:return K+"box-"+b(e,"-grow","")+K+e+X+b(e,"grow","positive")+e;case 4554:return K+b(e,/([^-])(transform)/g,"$1"+K+"$2")+e;case 6187:return b(b(b(e,/(zoom-|grab)/,K+"$1"),/(image-set)/,K+"$1"),e,"")+e;case 5495:case 3959:return b(e,/(image-set\([^]*)/,K+"$1$`$1");case 4968:return b(b(e,/(.+:)(flex-)?(.*)/,K+"box-pack:$3"+X+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+K+e+e;case 4095:case 3583:case 4068:case 2532:return b(e,/(.+)-inline(.+)/,K+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(S(e,t+1)){case 109:if(45!==S(e,t+4))break;case 102:return b(e,/(.+:)(.+)-([^]+)/,"$1"+K+"$2-$3$1"+Y+(108==S(e,t+3)?"$3":"$2-$3"))+e;case 115:return~k(e,"stretch")?pe(b(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==S(e,t+1))break;case 6444:switch(S(e,x(e)-3-(~k(e,"!important")&&10))){case 107:return b(e,":",":"+K)+e;case 101:return b(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+K+(45===S(e,14)?"inline-":"")+"box$3$1"+K+"$2$3$1"+X+"$2box$3")+e}break;case 5936:switch(S(e,t+11)){case 114:return K+e+X+b(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return K+e+X+b(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return K+e+X+b(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return K+e+X+e+e}return e}var me=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ee:e.return=pe(e.value,e.length);break;case te:return ne([N(e,{value:b(e.value,"@","@"+K)})],r);case Q:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return ne([N(e,{props:[b(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ne([N(e,{props:[b(t,/:(plac\w+)/,":"+K+"input-$1")]}),N(e,{props:[b(t,/:(plac\w+)/,":-moz-$1")]}),N(e,{props:[b(t,/:(plac\w+)/,X+"input-$1")]})],r)}return""})}}],ve=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var r,o,s=e.stylisPlugins||me,a={},i=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;i.push(e)});var c,l,u,d,f=[re,(d=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],p=(l=[de,fe].concat(s,f),u=C(l),function(e,t,n,r){for(var o="",s=0;s<u;s++)o+=l[s](e,t,n,r)||"";return o});o=function(e,t,n,r){c=n,ne(oe(e?e+"{"+t.styles+"}":t.styles),p),r&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new v({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return m.sheet.hydrate(i),m},he=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},ge={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ye(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var we=/[A-Z]|^ms/g,be=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ke=function(e){return 45===e.charCodeAt(1)},Se=function(e){return null!=e&&"boolean"!=typeof e},Ee=ye(function(e){return ke(e)?e:e.replace(we,"-$&").toLowerCase()}),xe=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(be,function(e,t,n){return Me={name:t,styles:n,next:Me},t})}return 1===ge[e]||ke(e)||"number"!=typeof t||0===t?t:t+"px"};function Ce(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return Me={name:o.name,styles:o.styles,next:Me},o.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)Me={name:a.name,styles:a.styles,next:Me},a=a.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Ce(e,t,n[o])+";";else for(var s in n){var a=n[s];if("object"!=typeof a){var i=a;null!=t&&void 0!==t[i]?r+=s+"{"+t[i]+"}":Se(i)&&(r+=Ee(s)+":"+xe(s,i)+";")}else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var c=Ce(e,t,a);switch(s){case"animation":case"animationName":r+=Ee(s)+":"+c+";";break;default:r+=s+"{"+c+"}"}}else for(var l=0;l<a.length;l++)Se(a[l])&&(r+=Ee(s)+":"+xe(s,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Me,c=n(e);return Me=i,Ce(e,t,c)}}var l=n;if(null==t)return l;var u=t[l];return void 0!==u?u:l}var Me,$e,Pe,Te=/label:\s*([^\s;{]+)\s*(;|$)/g,Le=!!s.useInsertionEffect&&s.useInsertionEffect,Re=Le||function(e){return e()},Ae=(Le||s.useLayoutEffect,s.createContext("undefined"!=typeof HTMLElement?ve({key:"css"}):null)),Oe=(Ae.Provider,function(e){return(0,s.forwardRef)(function(t,n){var r=(0,s.useContext)(Ae);return e(t,r,n)})}),Ne=s.createContext({}),Be={}.hasOwnProperty,_e="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ie=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return he(t,n,r),Re(function(){return function(e,t,n){he(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,n,r)}),null},ze=Oe(function(e,t,n){var r=e.css;"string"==typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var o=e[_e],a=[r],i="";"string"==typeof e.className?i=function(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")}),r}(t.registered,a,e.className):null!=e.className&&(i=e.className+" ");var c=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Me=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,o+=Ce(n,t,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=Ce(n,t,e[a]),r&&(o+=s[a]);Te.lastIndex=0;for(var i,c="";null!==(i=Te.exec(o));)c+="-"+i[1];return{name:function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+c,styles:o,next:Me}}(a,void 0,s.useContext(Ne));i+=t.key+"-"+c.name;var l={};for(var u in e)Be.call(e,u)&&"css"!==u&&u!==_e&&(l[u]=e[u]);return l.className=i,n&&(l.ref=n),s.createElement(s.Fragment,null,s.createElement(Ie,{cache:t,serialized:c,isStringTag:"string"==typeof o}),s.createElement(o,l))}),Fe=(n(4146),function(e,t){var n=arguments;if(null==t||!Be.call(t,"css"))return s.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=ze,o[1]=function(e,t){var n={};for(var r in t)Be.call(t,r)&&(n[r]=t[r]);return n[_e]=e,n}(e,t);for(var a=2;a<r;a++)o[a]=n[a];return s.createElement.apply(null,o)});$e=Fe||(Fe={}),Pe||(Pe=$e.JSX||($e.JSX={}));const je=e=>{const t=Number.parseFloat(e.style.height||"");if(Number.isFinite(t)&&t>0)return Math.max(1,Math.ceil(t));const n=e.getBoundingClientRect().height;return Number.isFinite(n)&&n>0?Math.max(1,Math.ceil(n)):1},De="blockstudio-canvas-settings",qe=function(){try{const e=localStorage.getItem(De);if(e)return JSON.parse(e)}catch{}return{}}(),He={liveMode:qe.liveMode??!1,fingerprint:"",view:"blocks"===qe.view?"blocks":"pages"},Ve="blockstudio/canvas",We=(0,c.createReduxStore)(Ve,{reducer(e=He,t){let n=e;switch(t.type){case"SET_LIVE_MODE":n={...e,liveMode:t.value};break;case"SET_VIEW":n={...e,view:t.value};break;case"SET_FINGERPRINT":return{...e,fingerprint:t.value};default:return e}return function(e){try{localStorage.setItem(De,JSON.stringify({liveMode:e.liveMode,view:e.view}))}catch{}}(n),n},actions:{setLiveMode:e=>({type:"SET_LIVE_MODE",value:e}),setView:e=>({type:"SET_VIEW",value:e}),setFingerprint:e=>({type:"SET_FINGERPRINT",value:e})},selectors:{isLiveMode:e=>e.liveMode,getView:e=>e.view,getFingerprint:e=>e.fingerprint}});function Ge(e,t,n){const r=new Map;for(const t of e)r.set(n(t),t);for(const e of t)r.set(n(e),e);return Array.from(r.values())}(0,c.register)(We);const Ue=Fe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor",style:{marginRight:4,verticalAlign:-1}},Fe("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),Je=(0,s.memo)(({page:e,revision:t,width:n=1440,onSwapComplete:r})=>{const i=(0,s.useRef)(null),[c,l]=(0,s.useState)(null),u=(0,s.useRef)(1),d=(0,s.useRef)(r),f=(0,s.useRef)(t),p=(0,s.useRef)(null),v=(0,s.useRef)(null),h=(0,s.useRef)(null),g=(0,s.useRef)(new Set);d.current=r;const[y,w]=(0,s.useState)(()=>({id:u.current,revision:t,width:n,blocks:(0,o.parse)(e.content)})),[b,k]=(0,s.useState)([]),[S,E]=(0,s.useState)(null),[x,C]=(0,s.useState)(null),[M,$]=(0,s.useState)(null),P=S&&b.find(e=>e.id===S)||null;v.current=P,h.current=x;const T=(0,s.useCallback)(e=>{e&&(e._load=()=>{})},[]),L=(0,s.useCallback)(e=>{h.current===e&&$(e)},[]);return(0,s.useEffect)(()=>{const t=document.createElement("div");return t.dataset.canvasStagingHost=e.slug,t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.width=`${n}px`,document.body.appendChild(t),l(t),()=>{l(null),t.remove()}},[e.slug]),(0,s.useEffect)(()=>{c?.style.setProperty("width",`${n}px`)},[c,n]),(0,s.useEffect)(()=>{const r=p.current;r&&r.revision===t&&r.width===n||w(r=>r&&r.revision===t&&r.width===n?r:{id:++u.current,revision:t,width:n,blocks:(0,o.parse)(e.content)})},[t,n,e.content]),(0,s.useEffect)(()=>{if(!y)return;const e=i.current;if(!e)return;const t=()=>{e.querySelectorAll("iframe").forEach(e=>{e.style.setProperty("max-height","none","important")}),e.querySelectorAll(".block-editor-block-preview__content").forEach(e=>{e.style.setProperty("max-height","none","important"),e.style.setProperty("overflow","visible","important")})},n=new MutationObserver(t);return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),t(),()=>n.disconnect()},[y?.id,c]),(0,s.useEffect)(()=>{if(!y)return;const e=i.current;if(!e)return;let t=!1,n=!1;const r=new AbortController,o=performance.now(),s=(r=!1)=>{if(t||n)return;const s=e.querySelector("iframe"),a=s?.contentDocument,i=s?.contentDocument?.documentElement?.outerHTML;if(!s||!i)return;const c=!!a?.querySelector(".blockstudio-block__inner-spinner"),l=!!a?.querySelector(".wp-block-missing"),u=!!v.current,d=performance.now()-o>=2500,f=(a?.body?.textContent||"").trim(),m=f.length>0&&!/^loading(?:\.\.\.)?$/i.test(f);if(!r&&!u&&c&&!l){if(!d)return;if(!m)return}n=!0;const h=URL.createObjectURL(new window.Blob([i],{type:"text/html"}));g.current.add(h);const w={id:y.id,revision:y.revision,width:y.width,src:h,height:je(s)};p.current={revision:y.revision,width:y.width};const b=v.current;if(!b)return k([w]),C(w.id),void $(null);k([b,w]),C(w.id),$(null)};var a,c;(a=e,c=r.signal,new Promise((e,t)=>{if(c?.aborted)return void t(new DOMException("Aborted","AbortError"));const n=[],r=()=>{n.forEach(e=>e()),e()},o=()=>{n.forEach(e=>e()),t(new DOMException("Aborted","AbortError"))};c&&(c.addEventListener("abort",o,{once:!0}),n.push(()=>c.removeEventListener("abort",o)));const s=e=>{let t,o=!1;const s=()=>{o||(o=!0,i.disconnect(),clearTimeout(t),clearTimeout(c),(e=>{const t=Array.from(e.querySelectorAll("img, video"));return new Promise(e=>{let r=!1;const o=()=>{r||(r=!0,clearTimeout(s),e())},s=window.setTimeout(o,2e3);n.push(()=>clearTimeout(s)),Promise.all(t.map(e=>e instanceof HTMLImageElement?e.complete?Promise.resolve():new Promise(t=>{e.addEventListener("load",()=>t(),{once:!0}),e.addEventListener("error",()=>t(),{once:!0})}):e instanceof HTMLVideoElement?e.readyState>=1?Promise.resolve():new Promise(t=>{e.addEventListener("loadedmetadata",()=>t(),{once:!0}),e.addEventListener("error",()=>t(),{once:!0})}):Promise.resolve())).then(o).catch(o)})})(e).then(()=>{(e=>{const t=()=>!!e.querySelector(".blockstudio-block__inner-spinner");return t()?new Promise(r=>{let o=null;const s=()=>{i.disconnect(),null!==o&&clearTimeout(o),clearTimeout(c),r()},a=()=>{t()?null!==o&&(clearTimeout(o),o=null):(null!==o&&clearTimeout(o),o=window.setTimeout(s,500))},i=new MutationObserver(a);i.observe(e.documentElement,{childList:!0,subtree:!0,attributes:!0});const c=window.setTimeout(s,8e3);n.push(()=>{i.disconnect(),null!==o&&clearTimeout(o),clearTimeout(c)}),a()}):Promise.resolve()})(e).then(r)}))},a=()=>{clearTimeout(t),t=window.setTimeout(s,500)},i=new MutationObserver(a);i.observe(e.documentElement,{childList:!0,subtree:!0,attributes:!0});const c=window.setTimeout(s,2500);n.push(()=>{i.disconnect(),clearTimeout(t),clearTimeout(c)}),a()},i=e=>{const t=e.contentDocument;if(!t)return void r();const o=()=>{const e=t.querySelector(".editor-styles-wrapper");return!!e&&e.children.length>0};if(o())return void s(t);const a=new MutationObserver(()=>{o()&&(a.disconnect(),s(t))});a.observe(t.documentElement,{childList:!0,subtree:!0}),n.push(()=>a.disconnect())},l=e=>{const t=e.contentDocument;t&&"complete"===t.readyState?(i(e),"about:blank"===t.URL&&e.addEventListener("load",()=>i(e),{once:!0})):e.addEventListener("load",()=>i(e),{once:!0})},u=a.querySelector("iframe");if(u)return void l(u);const d=new MutationObserver(()=>{const e=a.querySelector("iframe");e&&(d.disconnect(),l(e))});d.observe(a,{childList:!0,subtree:!0}),n.push(()=>d.disconnect())})).then(()=>{s()}).catch(()=>{});const l=null!==v.current?window.setInterval(()=>{s()},500):null,u=window.setTimeout(()=>s(!0),8e3);return()=>{t=!0,null!==l&&clearInterval(l),clearTimeout(u),r.abort()}},[y,c]),(0,s.useEffect)(()=>{const e=new Set(b.map(e=>e.src));g.current.forEach(t=>{e.has(t)||(URL.revokeObjectURL(t),g.current.delete(t))})},[b]),(0,s.useEffect)(()=>()=>{g.current.forEach(e=>URL.revokeObjectURL(e)),g.current.clear()},[]),(0,s.useEffect)(()=>{if(null===M)return;const t=b.find(e=>e.id===M);if(!t)return;const n=v.current?.revision??f.current;E(t.id),k([t]),C(null),$(null),w(null),t.revision!==n&&(f.current=t.revision,d.current?.(e.slug))},[M,b,e.slug]),Fe("div",{"data-canvas-slug":e.slug,"data-canvas-revision":t,style:{position:"relative",width:n,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",backfaceVisibility:"hidden"}},b.map(e=>{const t=e.id===S,n=e.id===x,r=e.id===M;return Fe("div",{key:e.id,className:"components-disabled",style:t?{display:"block",width:"100%",height:e.height,pointerEvents:"none",background:"#fff"}:{position:"absolute",top:0,left:0,width:"100%",height:e.height,zIndex:r?2:1,visibility:r?"visible":"hidden",pointerEvents:"none",background:"#fff"}},Fe("iframe",{ref:T,"data-canvas-display-layer":t?"active":"pending",src:e.src,"aria-hidden":!0,tabIndex:-1,onLoad:n?()=>L(e.id):void 0,style:{display:"block",width:"100%",height:"100%",border:0,pointerEvents:"none",background:"#fff"}}))}),y&&c&&(0,m.createPortal)(Fe("div",{ref:i,"data-canvas-staging":"",style:{width:n}},Fe("div",{"data-canvas-layer-active":"true"},Fe(a.BlockPreview,{blocks:y.blocks,viewportWidth:n}))),c))},(e,t)=>e.revision===t.revision&&e.width===t.width&&e.onSwapComplete===t.onSwapComplete&&e.page.slug===t.page.slug&&e.page.name===t.page.name&&e.page.title===t.page.title&&e.page.content===t.page.content),Xe=({pages:e,blocks:t,settings:n})=>{const r=(0,s.useRef)(null),l=(0,s.useRef)(null),u=(0,s.useRef)(null),[m,v]=(0,s.useState)(!1),h=(0,s.useRef)(!1),[g,y]=(0,s.useState)(n),[w,b]=(0,s.useState)(e),[k,S]=(0,s.useState)(t),[E,x]=(0,s.useState)(()=>{const t={};return e.forEach(e=>{t[e.slug]=0}),t}),[C,M]=(0,s.useState)(()=>{const e={};return t.forEach(t=>{e[t.name]=0}),e}),[$,P]=(0,s.useState)(null),T=(0,s.useRef)(null);T.current=$;const L=(0,s.useRef)(w);L.current=w;const R=(0,s.useRef)(k);R.current=k;const A=(0,c.useSelect)(e=>e(We).isLiveMode(),[]),O=(0,c.useSelect)(e=>e(We).getView(),[]),{setLiveMode:N,setView:B,setFingerprint:_}=(0,c.useDispatch)(Ve),I="blocks"===O,z=I?800:1440,F=I?k:w,j=F.length,[D,q]=(0,s.useState)(Math.min(8,j)),H=F.slice(0,D),V=I?Math.ceil(Math.sqrt(k.length))||1:w.length,W=(0,s.useCallback)(()=>{const e=l.current;if(!u.current||!e)return;const t=u.current;e.style.transform=`translate(${t.x}px, ${t.y}px) scale(${t.scale})`,e.style.setProperty("--canvas-label-scale",String(1/t.scale)),e.style.opacity="1"},[]),G=(0,s.useCallback)(()=>{const e=l.current;if(!e)return;const t=e.offsetWidth,n=e.offsetHeight,r=window.innerWidth,o=window.innerHeight,s=(r-240)/t,a=(o-240)/n,i=Math.min(s,a,1);u.current={x:(r-t*i)/2,y:(o-n*i)/2,scale:i},W()},[W]),U=(0,s.useCallback)(()=>{const e=l.current;if(!e)return;const t=e.offsetWidth,n=e.offsetHeight,r=window.innerWidth,o=window.innerHeight;u.current={x:(r-t)/2,y:(o-n)/2,scale:1},W()},[W]),J=Math.min(8,j);(0,s.useEffect)(()=>{m||0!==J||v(!0)},[m,J]),(0,s.useEffect)(()=>{const e=l.current;if(!e||m||0===J)return;let t=!1;const n=()=>{const n=e.querySelectorAll("iframe");n.length<J||(r.disconnect(),(async e=>{await new Promise(t=>{let n=!1;const r=()=>{n||(n=!0,clearTimeout(o),t())},o=window.setTimeout(r,2e3);Promise.all(Array.from(e).map(e=>"complete"===e.contentDocument?.readyState?Promise.resolve():new Promise(t=>e.addEventListener("load",()=>t(),{once:!0})))).then(r).catch(r)});const t=[];e.forEach(e=>{const n=e.contentDocument;n&&t.push(...Array.from(n.querySelectorAll("img, video")))}),await new Promise(e=>{let n=!1;const r=()=>{n||(n=!0,clearTimeout(o),e())},o=window.setTimeout(r,2e3);Promise.all(t.map(e=>e instanceof HTMLImageElement?e.complete?Promise.resolve():new Promise(t=>{e.addEventListener("load",()=>t(),{once:!0}),e.addEventListener("error",()=>t(),{once:!0})}):e instanceof HTMLVideoElement?e.readyState>=1?Promise.resolve():new Promise(t=>{e.addEventListener("loadedmetadata",()=>t(),{once:!0}),e.addEventListener("error",()=>t(),{once:!0})}):Promise.resolve())).then(r).catch(r)})})(n).then(()=>{t||v(!0)}))},r=new MutationObserver(n);return r.observe(e,{childList:!0,subtree:!0}),n(),()=>{t=!0,r.disconnect()}},[J,m]),(0,s.useEffect)(()=>{if(m||0===J)return;const e=setTimeout(()=>v(!0),1e4);return()=>clearTimeout(e)},[m,J]),(0,s.useEffect)(()=>{if(!m||!l.current)return;const e=l.current;let t,n=!1;const r=()=>{n||(n=!0,o.disconnect(),G(),document.getElementById("blockstudio-canvas-loader")?.remove(),h.current=!0)},o=new ResizeObserver(()=>{clearTimeout(t),t=window.setTimeout(r,500)});return o.observe(e),t=window.setTimeout(r,500),()=>{o.disconnect(),clearTimeout(t)}},[m,G]),(0,s.useEffect)(()=>{const e=r.current;if(!e)return;const t=e=>{if(T.current)return;e.preventDefault();const t=u.current;if(t){if(e.ctrlKey||e.metaKey){const n=1-.01*e.deltaY,r=Math.min(2,Math.max(.02,t.scale*n)),o=r/t.scale;u.current={x:e.clientX-(e.clientX-t.x)*o,y:e.clientY-(e.clientY-t.y)*o,scale:r}}else u.current={...t,x:t.x-e.deltaX,y:t.y-e.deltaY};W()}};return e.addEventListener("wheel",t,{passive:!1}),()=>e.removeEventListener("wheel",t)},[W]);const[X,Y]=(0,s.useState)(window.innerWidth);(0,s.useEffect)(()=>{if(!$)return;Y(window.innerWidth);const e=e=>{"Escape"===e.key&&P(null)},t=()=>{Y(window.innerWidth)};return document.addEventListener("keydown",e),window.addEventListener("resize",t),()=>{document.removeEventListener("keydown",e),window.removeEventListener("resize",t)}},[$]);const K=(0,s.useRef)(O);(0,s.useEffect)(()=>{K.current!==O&&(K.current=O,P(null),q(Math.min(8,F.length)),h.current&&requestAnimationFrame(()=>G()))},[O,G,F.length]),(0,s.useEffect)(()=>{if(!m)return;if(D>=j)return;const e=setTimeout(()=>{q(e=>Math.min(e+8,j))},200);return()=>clearTimeout(e)},[m,D,j]);const Z=(0,s.useRef)(_);Z.current=_;const Q=(0,s.useCallback)(e=>{y(t=>{const n=t.__unstableResolvedAssets;if(!n?.styles)return t;const r='<style id="blockstudio-tailwind-editor">',o=n.styles.indexOf(r);let s;if(-1!==o){const a="</style>",i=n.styles.indexOf(a,o);if(n.styles.substring(o+40,i)===e)return t;s=n.styles.substring(0,o)+r+e+a+n.styles.substring(i+a.length)}else s=n.styles+r+e+"</style>";return s===n.styles?t:{...t,__unstableResolvedAssets:{...n,styles:s}}})},[]),ee=(0,s.useCallback)((e,t)=>{const n=new Set(e.changedBlocks),r=Array.from(n),s=window.blockstudio?.blockstudioBlocks||[];if(n.size>0){const t=s.filter(e=>!n.has(e.blockName));window.blockstudio.blockstudioBlocks=[...t,...e.blockstudioBlocks]}else e.blockstudioBlocks.length>0&&(window.blockstudio.blockstudioBlocks=[...s,...e.blockstudioBlocks]);const a=L.current,i=R.current;if(e.pages.length>0)if(e.changedPages.length>0){const n=new Map(e.pages.map(e=>[e.slug,e]));for(const e of a){const r=n.get(e.slug);r&&e.content!==r.content&&t.add(r.slug)}}else for(const o of e.pages){const e=a.find(e=>e.slug===o.slug);e&&(e.content!==o.content||n.size>0&&r.some(e=>o.content.includes(e)))&&t.add(o.slug)}else if(n.size>0)for(const e of a)r.some(t=>e.content.includes(t))&&t.add(e.slug);if(e.blocks.length>0)for(const r of e.blocks){const e=i.find(e=>e.name===r.name);e&&(e.content!==r.content||n.has(r.name))&&t.add(r.name)}if(e.blocksNative){const t=window.blockstudio?.registerBlock;t&&Object.values(e.blocksNative).forEach(e=>{if(e?.name&&!(0,o.getBlockType)(e.name))try{t(e)}catch(t){console.error("[canvas:queue] registerBlock FAILED:",e.name,t)}})}e.blockstudioBlocks.length>0&&window.blockstudio?.replacePreloads?.(e.blockstudioBlocks),e.pages.length>0?b(t=>{const o=new Set;let s;if(e.changedPages.length>0){const n=new Map(e.pages.map(e=>[e.slug,e])),r=t.map(e=>{const t=n.get(e.slug);return t?(n.delete(e.slug),e.content!==t.content?(o.add(t.slug),t):e):e});n.forEach(e=>{o.add(e.slug),r.push(e)}),s=r}else s=e.pages.map(e=>{const s=t.find(t=>t.slug===e.slug);return s&&s.content===e.content?n.size>0&&r.some(t=>e.content.includes(t))?(o.add(e.slug),{...e}):s:(o.add(e.slug),e)});return o.size>0&&x(e=>{const t={...e};return o.forEach(e=>{t[e]=(t[e]||0)+1}),t}),0===o.size&&s.length===t.length&&s.every((e,n)=>e===t[n])?t:s}):n.size>0&&b(e=>{const t=new Set,n=e.map(e=>r.some(t=>e.content.includes(t))?(t.add(e.slug),{...e}):e);return t.size>0&&x(e=>{const n={...e};return t.forEach(e=>{n[e]=(n[e]||0)+1}),n}),0===t.size?e:n}),e.tailwindCss&&Q(e.tailwindCss),e.blocks.length>0&&S(t=>{const r=new Set,o=t.map(t=>{const o=e.blocks.find(e=>e.name===t.name);return o?t.content!==o.content?(r.add(o.name),o):n.has(t.name)?(r.add(t.name),{...o}):t:t}),s=e.blocks.filter(e=>!t.some(t=>t.name===e.name));return s.forEach(e=>r.add(e.name)),r.size>0&&M(e=>{const t={...e};return r.forEach(e=>{t[e]=(t[e]||0)+1}),t}),0===r.size&&0===s.length?t:[...o,...s]})},[]),te=(0,s.useRef)(null);te.current||(te.current=function(e){let t=null,n=null,r=null,o=null,s=new Set,a=!1;const i=()=>{if(!n)return;null!==o&&(clearTimeout(o),o=null);const r=n;n=null,s=new Set,e.onAllSwapsComplete(r),t&&!a&&c()},c=()=>{if(n||!t||a)return;const r=t;t=null,n=r,s=new Set,e.onFlush(r,s),0!==s.size?o=setTimeout(()=>{console.warn("[update-queue] swap timeout, forcing completion. Pending:",Array.from(s)),i()},8e3):i()};return{enqueue:e=>{a||(t=t?function(e,t){const n=new Set([...e.changedBlocks,...t.changedBlocks]),r=new Set([...e.changedPages,...t.changedPages]),o=new Map;for(const t of e.blockstudioBlocks)o.set(t.blockName,t);for(const e of t.blockstudioBlocks)o.set(e.blockName,e);return{fingerprint:t.fingerprint,pages:Ge(e.pages,t.pages,e=>e.slug),blocks:Ge(e.blocks,t.blocks,e=>e.name),blockstudioBlocks:Array.from(o.values()),changedBlocks:Array.from(n),changedPages:Array.from(r),blocksNative:t.blocksNative?{...e.blocksNative||{},...t.blocksNative}:e.blocksNative,tailwindCss:void 0!==t.tailwindCss?t.tailwindCss:e.tailwindCss}}(t,e):e,null!==r&&clearTimeout(r),n||(r=setTimeout(()=>{r=null,c()},50)))},reportSwapComplete:e=>{n&&(s.delete(e),0===s.size&&i())},destroy:()=>{a=!0,null!==r&&clearTimeout(r),null!==o&&clearTimeout(o),t=null,n=null,s=new Set}}}({onFlush:ee,onAllSwapsComplete(e){Z.current(e.fingerprint)}})),(0,s.useEffect)(()=>()=>{te.current?.destroy()},[]);const ne=(0,s.useCallback)(e=>{te.current?.reportSwapComplete(e)},[]);(0,s.useEffect)(()=>{if(!A)return;const e=window.blockstudioCanvas,t=e?.restRoot,n=e?.restNonce;if(!t||!n)return;const r=t+"blockstudio/v1/canvas/stream?_wpnonce="+encodeURIComponent(n),o=new EventSource(r);let s=!0;const a=(e,t)=>{const n=t?{...e,...t}:e;te.current?.enqueue({fingerprint:e.fingerprint,pages:n.pages||[],blocks:n.blocks||[],blockstudioBlocks:n.blockstudioBlocks||[],changedBlocks:e.changedBlocks||[],changedPages:e.changedPages||[],blocksNative:n.blocksNative,tailwindCss:e.tailwindCss})};return o.addEventListener("fingerprint",e=>{try{const t=JSON.parse(e.data);"string"==typeof t.fingerprint&&Z.current(t.fingerprint)}catch{}}),o.addEventListener("changed",e=>{try{const r=JSON.parse(e.data);if("string"!=typeof r.fingerprint||!Array.isArray(r.blockstudioBlocks))return;if((r.changedBlocks?.length||0)>0&&0===(r.pages?.length||0)){const e=t+"blockstudio/v1/canvas/refresh?_wpnonce="+encodeURIComponent(n);return void window.fetch(e,{credentials:"same-origin"}).then(e=>e.ok?e.json():null).then(e=>{s&&(e?a(r,e):a(r))}).catch(()=>{s&&a(r)})}a(r)}catch{}}),()=>{s=!1,o.close()}},[A]);const re="pages"===O&&w.length>0||"blocks"===O&&k.length>0;(0,s.useEffect)(()=>{re||document.getElementById("blockstudio-canvas-loader")?.remove()},[re]);const oe=I?"#a855f7":"#999";return Fe(a.BlockEditorProvider,{settings:g},Fe("style",null,"\n        [data-canvas-label] { cursor: pointer; }\n        [data-canvas-label] .canvas-focus-icon { opacity: 0; transition: opacity 0.15s; }\n        [data-canvas-label]:hover .canvas-focus-icon { opacity: 1; }\n      "),Fe("div",{ref:r,"data-canvas-view":O,style:{position:"fixed",inset:0,background:"#2c2c2c",overflow:"hidden"}},!re&&Fe("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:16}},"pages"===O?"No Blockstudio pages found.":"No Blockstudio blocks found."),Fe("div",{ref:l,"data-canvas-surface":"",style:{transformOrigin:"0 0",willChange:"transform",display:"grid",gridTemplateColumns:`repeat(${V}, ${z}px)`,alignItems:"start",gap:80,position:"absolute",top:0,left:0}},H.map(e=>{const t="slug"in e?e.slug:e.name,n="slug"in e?E[e.slug]||0:C[e.name]||0;return Fe("div",{key:t,style:{position:"relative",minHeight:I?200:void 0}},Fe("div",{"data-canvas-label":"",onClick:()=>P(t),style:{position:"absolute",bottom:"100%",left:0,paddingBottom:8,maxWidth:`calc(${z}px / var(--canvas-label-scale, 1))`,overflow:"hidden",textOverflow:"ellipsis",color:oe,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:13,fontWeight:500,userSelect:"none",whiteSpace:"nowrap",transform:"scale(var(--canvas-label-scale, 1))",transformOrigin:"0 100%"}},I&&Ue,e.title,Fe("svg",{className:"canvas-focus-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor",style:{marginLeft:6,verticalAlign:-1}},Fe("path",{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06V11.5h1.5v-7zM4.5 19.5h7V18H7.06l5.97-5.97-1.06-1.06L6 16.94V12.5H4.5v7z"}))),Fe(Je,{page:{title:e.title,slug:t,name:e.name,content:e.content},revision:n,width:z,onSwapComplete:ne}))})),$&&(()=>{const e=F.find(e=>"slug"in e?e.slug===$:e.name===$);if(!e)return null;const t="slug"in e?e.slug:e.name,n="slug"in e?E[e.slug]||0:C[e.name]||0;return Fe("div",{"data-canvas-focus":"",style:{position:"absolute",inset:0,zIndex:10,overflowX:"hidden",overflowY:"auto",background:"#2c2c2c"}},Fe(Je,{page:{title:e.title,slug:t,name:e.name,content:e.content},revision:n,width:X,onSwapComplete:ne}))})(),Fe("div",{style:{position:"absolute",top:12,right:12,zIndex:20,display:"flex",alignItems:"center",gap:8},className:"blockstudio-canvas-menu"},$?Fe(i.Button,{icon:d,label:"Close focus mode",onClick:()=>P(null),style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",borderRadius:"50%",width:32,height:32,minWidth:32}}):Fe(React.Fragment,null,A&&Fe("div",{style:{width:8,height:8,borderRadius:"50%",background:"#4ade80",animation:"blockstudio-canvas-pulse 2s ease-in-out infinite"}}),Fe(i.DropdownMenu,{icon:f,label:"Canvas options"},()=>Fe(React.Fragment,null,Fe(i.MenuGroup,null,Fe(i.MenuItem,{icon:"pages"===O?p:void 0,onClick:()=>B("pages")},"Pages"),Fe(i.MenuItem,{icon:"blocks"===O?p:void 0,onClick:()=>B("blocks")},"Blocks")),Fe(i.MenuGroup,null,Fe(i.MenuItem,{onClick:G},"Fit to view"),Fe(i.MenuItem,{onClick:U},"Zoom to 100%")),Fe(i.MenuGroup,null,Fe(i.MenuItem,{icon:A?p:void 0,onClick:()=>N(!A)},"Live mode"))))))))},Ye=()=>{const e=document.getElementById("blockstudio-canvas");if(!e)return;const t=document.createElement("style");t.textContent=["[data-canvas-surface] { opacity: 0; transition: opacity 0.4s ease; }",".blockstudio-canvas-menu .components-button { color: rgba(255,255,255,0.6); border-radius: 4px; }",".blockstudio-canvas-menu .components-button:hover, .blockstudio-canvas-menu .components-button:focus { color: #fff; background: rgba(255,255,255,0.1); }","@keyframes blockstudio-canvas-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }"].join("\n"),document.head.appendChild(t),window.wp?.blockLibrary?.registerCoreBlocks(),(0,o.setDefaultBlockName)("core/paragraph"),(0,o.setFreeformContentHandlerName)("core/freeform"),(0,o.setUnregisteredTypeHandlerName)("core/missing");const n=window.blockstudioCanvas?.pages??[],s=window.blockstudioCanvas?.blocks??[],a=window.blockstudioCanvas?.settings??{},i=window.blockstudioCanvas?.canvasVersion??"unknown";console.log("[Blockstudio Canvas] version:",i),(0,r.H)(e).render(Fe(Xe,{pages:n,blocks:s,settings:a}))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Ye):Ye()})();