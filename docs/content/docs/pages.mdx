---
title: Pages
description: Create WordPress pages from file templates with automatic syncing.
---

# Pages

Pages are file-based templates that sync to the WordPress database as posts. When you update a template file, Blockstudio detects the change and updates the corresponding page.

## page.json

Each page folder needs a `page.json` configuration file:

```json title="page.json"
{
  "name": "about",
  "title": "About Us",
  "slug": "about-us",
  "postType": "page",
  "postStatus": "publish",
  "templateLock": "all"
}
```

### Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `name` | `string` | *required* | Unique identifier for the page |
| `title` | `string` | Auto from name | The page title |
| `slug` | `string` | Same as name | URL slug for the page |
| `postType` | `string` | `"page"` | WordPress post type |
| `postStatus` | `string` | `"draft"` | Status for new posts (`publish`, `draft`, `pending`, `private`) |
| `blockEditingMode` | `string` | — | Block editing mode: `"default"`, `"contentOnly"`, or `"disabled"` |
| `templateLock` | `string\|false` | `"all"` | Lock mode: `"all"`, `"insert"`, `"contentOnly"`, or `false` |
| `templateFor` | `string\|null` | `null` | Set as default template for a post type |
| `sync` | `boolean` | `true` | Whether to sync content when template changes |

## Block Editing Mode

The `blockEditingMode` property controls how blocks can be edited in the editor. Set a page-level default in `page.json` and override per-element in the template:

```json title="page.json"
{
  "name": "about",
  "title": "About Us",
  "templateLock": "all",
  "blockEditingMode": "disabled"
}
```

```html title="index.php"
<h1 blockEditingMode="contentOnly">Editable Title</h1>
<p>This paragraph inherits "disabled" from the page default.</p>
<block name="core/buttons" blockEditingMode="default">
  <block name="core/button" url="/contact">Fully editable button</block>
</block>
```

| Value | Description |
|-------|-------------|
| `"default"` | Full editing — blocks can be selected, moved, and edited |
| `"contentOnly"` | Text editing only — block text is editable but settings and structure are locked |
| `"disabled"` | No editing — blocks are completely non-interactive |

Per-element overrides are set as HTML attributes on any element (`<h1>`, `<p>`, `<div>`, etc.) or on `<block>` elements. Ancestor container blocks of overridden elements are automatically set to `contentOnly` so their children remain accessible.

## Template Lock

The `templateLock` property controls how users can edit the page in the editor:

| Value | Add/Remove | Move | Edit Content |
|-------|------------|------|--------------|
| `"all"` | No | No | No |
| `"insert"` | No | Yes | Yes |
| `"contentOnly"` | No | No | Yes |
| `false` | Yes | Yes | Yes |

When a `templateLock` is set, Blockstudio disables the ability to unlock blocks via the editor UI.

## Sync Behavior

Pages are synced when you visit the WordPress admin. The sync checks the file's modification time and only updates if the file has changed since the last sync.

To prevent a page from being overwritten after manual edits, set `"sync": false` in `page.json`.

## Keyed Block Merging

By default, when a template file changes, Blockstudio replaces the entire post content with the new template. This means any edits made in the WordPress editor are lost.

Add a `key` attribute to blocks to preserve user edits across template syncs. When a template has keyed blocks, Blockstudio merges template changes with the existing post content instead of replacing it.

### Adding Keys

Use the `key` attribute on any HTML element or `<block>` element:

```html title="index.php"
<h1 key="title">Default Title</h1>
<p key="intro">Default intro text.</p>

<div key="features">
  <p>First feature.</p>
  <p>Second feature.</p>
</div>

<block name="core/cover" key="hero" url="https://example.com/bg.jpg">
  <h2>Hero Title</h2>
  <p>Hero description.</p>
</block>
```

Keys must be globally unique across the entire template. A key protects the entire block and all of its content — you don't need to key individual children inside a keyed parent. Keyed blocks can be moved to any position or nesting level between template updates and their user content will still be preserved.

### How Merging Works

When a template file changes and the page re-syncs:

| Block | Behavior |
|-------|----------|
| **Keyed block** | User's content is preserved (innerHTML, innerContent, innerBlocks). Template's attributes are applied. |
| **Unkeyed block** | Replaced entirely with the template version (same as without keys) |

### Examples

**User edits are preserved in keyed blocks:**

1. Template defines `<p key="intro">Default intro.</p>`
2. User edits the paragraph in the editor to "Custom intro text."
3. Developer updates the template — adds a new block, changes layout
4. On sync: the paragraph keeps "Custom intro text." while the new layout is applied

**Attributes from the template still apply:**

1. Template has a cover block with `key="hero"` and a `url` attribute
2. Developer changes the cover's `url` attribute to a new background image
3. On sync: the new background image is applied, but user's content edits inside the cover are preserved

### Edge Cases

| Scenario | Behavior |
|----------|----------|
| New keyed block added to template | Appears with the template's default content |
| Keyed block removed from template | Deleted from the post |
| Block type changes (same key) | Template wins entirely — no content merge |
| Duplicate keys | Second occurrence is treated as unkeyed |
| No keys in template | Full replacement (same behavior as without keys) |
| Force sync | Full replacement — keys are ignored |
| Locked post | No sync at all |

### Combining with Editing Controls

Keys work well with `blockEditingMode` and `templateLock` to create pages where users can only edit specific content areas:

```json title="page.json"
{
  "name": "landing",
  "title": "Landing Page",
  "templateLock": "all",
  "blockEditingMode": "disabled"
}
```

```html title="index.php"
<block name="core/cover" key="hero" url="https://example.com/bg.jpg">
  <h1 blockEditingMode="contentOnly">Edit This Title</h1>
  <p blockEditingMode="contentOnly">Edit this description.</p>
</block>

<div key="features">
  <h2>Features</h2>
  <p blockEditingMode="contentOnly">Editable feature intro.</p>
</div>
```

This gives you a locked-down layout where users can only edit text in designated blocks, and those edits survive template updates. The `key` on the parent protects all content inside it.

## Post Type Templates

Use `templateFor` to set a page as the default template for a post type:

```json title="page.json"
{
  "name": "product-template",
  "title": "Product Template",
  "templateFor": "product",
  "templateLock": "insert"
}
```

Any new posts of that type will start with the defined block structure.

## Custom Paths

By default, Blockstudio scans `get_template_directory() . '/pages'`. Add additional paths with the filter:

```php
add_filter( 'blockstudio/pages/paths', function( $paths ) {
    $paths[] = get_stylesheet_directory() . '/custom-pages';
    $paths[] = MY_PLUGIN_DIR . '/pages';
    return $paths;
} );
```

## PHP API

```php
// Get all registered pages
$pages = Blockstudio\Pages::pages();

// Get a specific page
$page = Blockstudio\Pages::get_page('about');

// Get the WordPress post ID for a page
$postId = Blockstudio\Pages::get_post_id('about');

// Force sync a page (ignores modification time)
Blockstudio\Pages::force_sync('about');

// Force sync all pages
Blockstudio\Pages::force_sync_all();

// Lock a page to prevent automatic updates
Blockstudio\Pages::lock('about');

// Unlock a page
Blockstudio\Pages::unlock('about');
```
