/* esm.sh - @tgwf/co2@0.13.8 */
var T=4883333333333333e-25;var v=class{constructor(e){this.options=e,this.KWH_PER_BYTE_FOR_NETWORK=T}perByte(e,t){if(e<1)return 0;if(t){let a=e*72e-12*0,i=e*T*475;return a+i}let r=72e-12+T;return e*r*519}},V=v;var O={GIGABYTE:1e9};var Z={AFG:120.48,AFRICA:484.16,ALB:23.44,DZA:498.9,ASM:687.5,AGO:195.98,ATG:657.14,ARG:344.31,ARM:222.68,ABW:591.4,ASEAN:508.06,ASIA:535.23,AUS:501.7,AUT:157.52,AZE:532.9,BHS:698.11,BHR:494.02,BGD:577.03,BRB:644.86,BLR:415.64,BEL:165.36,BLZ:484.38,BEN:666.67,BTN:24.44,BOL:322.09,BIH:516.01,BWA:794.52,BRA:102.09,BRN:658.85,BGR:399.57,BFA:611.43,BDI:250,CPV:600,KHM:400.46,CMR:278.26,CAN:125.84,CYM:684.93,CAF:0,TCD:677.42,CHL:332.61,CHN:533.98,COL:168.95,COM:714.29,COG:395.52,COD:25.36,COK:400,CRI:37.21,CIV:410.75,HRV:246.46,CUB:602.23,CYP:589.35,CZE:415.35,DNK:180.71,DJI:666.67,DMA:529.41,DOM:549.8,ECU:188.71,EGY:469.63,SLV:194.23,GNQ:492.96,ERI:688.89,EST:464.03,SWZ:189.19,ETH:25.19,EU:277.19,EUROPE:296.45,FLK:500,FRO:428.57,FJI:289.47,FIN:130.98,FRA:84.82,GUF:254.72,PYF:471.43,G20:442.38,G7:343.92,GAB:397.38,GMB:700,GEO:134.83,DEU:384.83,GHA:361.2,GRC:343.82,GRL:133.33,GRD:714.29,GLP:623.53,GUM:670.33,GTM:291.55,GIN:208.63,GNB:750,GUY:642.28,HTI:606.06,HND:373.96,HKG:683.97,HUN:222.97,ISL:28.56,IND:633.4,IDN:619.02,IRN:487.86,IRQ:498.87,IRL:346.33,ISR:548.03,ITA:371.69,JAM:537.93,JPN:494.86,JOR:399.91,KAZ:635.57,KEN:100.57,KIR:666.67,XKX:768.73,KWT:551.74,KGZ:104.43,LAO:242.18,"LATIN AMERICA AND CARIBBEAN":238.68,LVA:181.82,LBN:605.74,LSO:20,LBR:304.35,LBY:550.42,LTU:194.25,LUX:168.14,MAC:491.53,MDG:483.25,MWI:133.8,MYS:543.87,MDV:651.52,MLI:463.13,MLT:495,MTQ:698.63,MRT:526.6,MUS:611.11,MEX:423.81,"MIDDLE EAST":516.02,MDA:677.18,MNG:749.66,MNE:399.38,MSR:1e3,MAR:610.41,MOZ:126.63,MMR:344.37,NAM:63.69,NRU:750,NPL:24.51,NLD:355.78,NCL:610.12,NZL:97.73,NIC:354.21,NER:622.22,NGA:368.11,"NORTH AMERICA":336.01,PRK:157.79,MKD:529.33,NOR:28.82,OCEANIA:449.71,OECD:340.95,OMN:488.27,PAK:344.16,PSE:465.12,PAN:186.61,PNG:526.75,PRY:25.49,PER:256.51,POL:633.1,PRT:234.03,PRI:681.47,QAT:489.88,REU:519.03,ROU:264.12,RUS:363.68,RWA:294.12,KNA:681.82,LCA:685.71,SPM:800,VCT:500,WSM:470.59,STP:600,SAU:557.78,SEN:523.13,SRB:569.38,SYC:615.39,SLE:47.62,SGP:488.78,SVK:140.67,SVN:237.38,SLB:727.27,SOM:634.15,ZAF:708.19,KOR:437.6,SSD:684.21,ESP:217.37,LKA:463,SDN:264.01,SUR:356.44,SWE:45.08,CHE:45.62,SYR:541.17,TWN:560.98,TJK:83.63,TZA:366.75,THA:501.57,PHL:582.84,TGO:460.32,TON:625,TTO:491.41,TUN:469.43,TUR:413.63,TKM:490.19,TCA:703.7,UGA:52.27,UKR:187.06,ARE:407.98,GBR:261.24,USA:367.26,URY:114.89,UZB:505.41,VUT:571.43,VEN:212.48,VNM:386.49,VGB:714.29,VIR:685.71,WORLD:437.26,YEM:543.91,ZMB:84.7,ZWE:392.28},x="average",R={data:Z,type:x};var U=.81,C=.52,p=.14,P=.15,S=.19,d=R.data.WORLD,N=50,I=.75,m=.25,A=.02;var g=n=>parseFloat(n.toFixed(2));function B(n){var e,t,r,a,i,l;if(typeof n!="object")throw new Error("Options must be an object");let o={};if(n?.gridIntensity){o.gridIntensity={};let{device:u,dataCenter:s,network:c}=n.gridIntensity;(u||u===0)&&(typeof u=="object"?(R.data[(e=u.country)==null?void 0:e.toUpperCase()]||(console.warn(`"${u.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. 
See https://developers.thegreenwebfoundation.org/co2js/data/ for more information. 
Falling back to global average grid intensity.`),o.gridIntensity.device={value:d}),o.gridIntensity.device={country:u.country,value:parseFloat(R.data[(t=u.country)==null?void 0:t.toUpperCase()])}):typeof u=="number"?o.gridIntensity.device={value:u}:(o.gridIntensity.device={value:d},console.warn(`The device grid intensity must be a number or an object. You passed in a ${typeof u}. 
Falling back to global average grid intensity.`))),(s||s===0)&&(typeof s=="object"?(R.data[(r=s.country)==null?void 0:r.toUpperCase()]||(console.warn(`"${s.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. 
See https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  
Falling back to global average grid intensity.`),o.gridIntensity.dataCenter={value:d}),o.gridIntensity.dataCenter={country:s.country,value:parseFloat(R.data[(a=s.country)==null?void 0:a.toUpperCase()])}):typeof s=="number"?o.gridIntensity.dataCenter={value:s}:(o.gridIntensity.dataCenter={value:d},console.warn(`The data center grid intensity must be a number or an object. You passed in a ${typeof s}. 
Falling back to global average grid intensity.`))),(c||c===0)&&(typeof c=="object"?(R.data[(i=c.country)==null?void 0:i.toUpperCase()]||(console.warn(`"${c.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. 
See https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  Falling back to global average grid intensity. 
Falling back to global average grid intensity.`),o.gridIntensity.network={value:d}),o.gridIntensity.network={country:c.country,value:parseFloat(R.data[(l=c.country)==null?void 0:l.toUpperCase()])}):typeof c=="number"?o.gridIntensity.network={value:c}:(o.gridIntensity.network={value:d},console.warn(`The network grid intensity must be a number or an object. You passed in a ${typeof c}. 
Falling back to global average grid intensity.`)))}return(n?.dataReloadRatio||n.dataReloadRatio===0)&&(typeof n.dataReloadRatio=="number"?n.dataReloadRatio>=0&&n.dataReloadRatio<=1?o.dataReloadRatio=n.dataReloadRatio:(o.dataReloadRatio=A,console.warn(`The dataReloadRatio option must be a number between 0 and 1. You passed in ${n.dataReloadRatio}. 
Falling back to default value.`)):(o.dataReloadRatio=A,console.warn(`The dataReloadRatio option must be a number. You passed in a ${typeof n.dataReloadRatio}. 
Falling back to default value.`))),(n?.firstVisitPercentage||n.firstVisitPercentage===0)&&(typeof n.firstVisitPercentage=="number"?n.firstVisitPercentage>=0&&n.firstVisitPercentage<=1?o.firstVisitPercentage=n.firstVisitPercentage:(o.firstVisitPercentage=I,console.warn(`The firstVisitPercentage option must be a number between 0 and 1. You passed in ${n.firstVisitPercentage}. 
Falling back to default value.`)):(o.firstVisitPercentage=I,console.warn(`The firstVisitPercentage option must be a number. You passed in a ${typeof n.firstVisitPercentage}. 
Falling back to default value.`))),(n?.returnVisitPercentage||n.returnVisitPercentage===0)&&(typeof n.returnVisitPercentage=="number"?n.returnVisitPercentage>=0&&n.returnVisitPercentage<=1?o.returnVisitPercentage=n.returnVisitPercentage:(o.returnVisitPercentage=m,console.warn(`The returnVisitPercentage option must be a number between 0 and 1. You passed in ${n.returnVisitPercentage}. 
Falling back to default value.`)):(o.returnVisitPercentage=m,console.warn(`The returnVisitPercentage option must be a number. You passed in a ${typeof n.returnVisitPercentage}. 
Falling back to default value.`))),o}var $=Object.defineProperty,z=Object.defineProperties,J=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(n,e,t)=>e in n?$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||(e={}))Q.call(e,t)&&K(n,t,e[t]);if(w)for(var t of w(e))q.call(e,t)&&K(n,t,e[t]);return n},W=(n,e)=>z(n,J(e)),G=class{constructor(e){this.options=e}energyPerByteByComponent(e){let r=e/O.GIGABYTE*U;return{consumerDeviceEnergy:r*C,networkEnergy:r*p,productionEnergy:r*S,dataCenterEnergy:r*P}}co2byComponent(e,t=d,r={}){let a=d,i=d,l=d,o=d;if(r?.gridIntensity){let{device:s,network:c,dataCenter:_}=r.gridIntensity;s?.value&&(a=s.value),c?.value&&(i=c.value),_?.value&&(l=_.value)}t===!0&&(l=N);let u={};for(let[s,c]of Object.entries(e))s.startsWith("dataCenterEnergy")?u[s.replace("Energy","CO2")]=c*l:s.startsWith("consumerDeviceEnergy")?u[s.replace("Energy","CO2")]=c*a:s.startsWith("networkEnergy")?u[s.replace("Energy","CO2")]=c*i:u[s.replace("Energy","CO2")]=c*o;return u}perByte(e,t=!1,r=!1,a={}){e<1&&(e=0);let i=this.energyPerByteByComponent(e,a);if(typeof t!="boolean")throw new Error(`perByte expects a boolean for the carbon intensity value. Received: ${t}`);let l=this.co2byComponent(i,t,a),u=Object.values(l).reduce((s,c)=>s+c);return r?W(F({},l),{total:u}):u}perVisit(e,t=!1,r=!1,a={}){let i=this.energyPerVisitByComponent(e,a);if(typeof t!="boolean")throw new Error(`perVisit expects a boolean for the carbon intensity value. Received: ${t}`);let l=this.co2byComponent(i,t,a),u=Object.values(l).reduce((s,c)=>s+c);return r?W(F({},l),{total:u}):u}energyPerByte(e){let t=this.energyPerByteByComponent(e);return Object.values(t).reduce((a,i)=>a+i)}energyPerVisitByComponent(e,t={},r=I,a=m,i=A){t.dataReloadRatio&&(i=t.dataReloadRatio),t.firstVisitPercentage&&(r=t.firstVisitPercentage),t.returnVisitPercentage&&(a=t.returnVisitPercentage);let l=this.energyPerByteByComponent(e),o={},u=Object.values(l);for(let[s,c]of Object.entries(l))o[`${s} - first`]=c*r,o[`${s} - subsequent`]=c*a*i;return o}energyPerVisit(e){let t=0,r=0,a=Object.entries(this.energyPerVisitByComponent(e));for(let[i,l]of a)i.indexOf("first")>0&&(t+=l);for(let[i,l]of a)i.indexOf("subsequent")>0&&(r+=l);return t+r}emissionsPerVisitInGrams(e,t=d){return g(e*t)}annualEnergyInKwh(e,t=1e3){return e*t*12}annualEmissionsInGrams(e,t=1e3){return e*t*12}annualSegmentEnergy(e){return{consumerDeviceEnergy:g(e*C),networkEnergy:g(e*p),dataCenterEnergy:g(e*P),productionEnergy:g(e*S)}}},h=G;var b=class{constructor(e){if(this.model=new h,e?.model==="1byte")this.model=new V;else if(e?.model==="swd")this.model=new h;else if(e?.model)throw new Error(`"${e.model}" is not a valid model. Please use "1byte" for the OneByte model, and "swd" for the Sustainable Web Design model.
See https://developers.thegreenwebfoundation.org/co2js/models/ to learn more about the models available in CO2.js.`);this._segment=e?.results==="segment"}perByte(e,t=!1){return this.model.perByte(e,t,this._segment)}perVisit(e,t=!1){var r;if((r=this.model)!=null&&r.perVisit)return this.model.perVisit(e,t,this._segment);throw new Error(`The perVisit() method is not supported in the model you are using. Try using perByte() instead.
See https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.`)}perByteTrace(e,t=!1,r={}){var a,i,l,o,u,s,c,_,y;let f={};return r&&(f=B(r)),{co2:this.model.perByte(e,t,this._segment,f),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:(l=(i=(a=f?.gridIntensity)==null?void 0:a.network)==null?void 0:i.value)!=null?l:d,dataCenter:t?N:(s=(u=(o=f?.gridIntensity)==null?void 0:o.dataCenter)==null?void 0:u.value)!=null?s:d,production:d,device:(y=(_=(c=f?.gridIntensity)==null?void 0:c.device)==null?void 0:_.value)!=null?y:d}}}}perVisitTrace(e,t=!1,r={}){var a,i,l,o,u,s,c,_,y,f,M,D,L;if((a=this.model)!=null&&a.perVisit){let E={};return r&&(E=B(r)),{co2:this.model.perVisit(e,t,this._segment,E),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:(o=(l=(i=E?.gridIntensity)==null?void 0:i.network)==null?void 0:l.value)!=null?o:d,dataCenter:t?N:(c=(s=(u=E?.gridIntensity)==null?void 0:u.dataCenter)==null?void 0:s.value)!=null?c:d,production:d,device:(f=(y=(_=E?.gridIntensity)==null?void 0:_.device)==null?void 0:y.value)!=null?f:d},dataReloadRatio:(M=E?.dataReloadRatio)!=null?M:.02,firstVisitPercentage:(D=E?.firstVisitPercentage)!=null?D:.75,returnVisitPercentage:(L=E?.returnVisitPercentage)!=null?L:.25}}}else throw new Error(`The perVisitDetailed() method is not supported in the model you are using. Try using perByte() instead.
See https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.`)}perDomain(e,t){let r=[];for(let a of Object.keys(e.domains)){let i;t&&t.indexOf(a)>-1?i=this.perByte(e.domains[a].transferSize,!0):i=this.perByte(e.domains[a].transferSize),r.push({domain:a,co2:i,transferSize:e.domains[a].transferSize})}return r.sort((a,i)=>i.co2-a.co2),r}perPage(e,t){let r=this.perDomain(e,t),a=0;for(let i of r)a+=i.co2;return a}perContentType(e,t){let r={};for(let i of e.assets){let l=new URL(i.url).domain,o=i.transferSize,u=this.perByte(o,t&&t.indexOf(l)>-1),s=i.type;r[s]||(r[s]={co2:0,transferSize:0}),r[s].co2+=u,r[s].transferSize+=o}let a=[];for(let i of Object.keys(r))a.push({type:i,co2:r[i].co2,transferSize:r[i].transferSize});return a.sort((i,l)=>l.co2-i.co2),a}dirtiestResources(e,t){let r=[];for(let a of e.assets){let i=new URL(a.url).domain,l=a.transferSize,o=this.perByte(l,t&&t.indexOf(i)>-1);r.push({url:a.url,co2:o,transferSize:l})}return r.sort((a,i)=>i.co2-a.co2),r.slice(0,r.length>10?10:r.length)}perParty(e,t){let r=0,a=0,i=e.firstPartyRegEx;for(let l of Object.keys(e.domains))l.match(i)?r+=this.perByte(e.domains[l].transferSize,t&&t.indexOf(l)>-1):a+=this.perByte(e.domains[l].transferSize,t&&t.indexOf(l)>-1);return{firstParty:r,thirdParty:a}}},Y=b;function X(n){return typeof n=="string"?ee(n):te(n)}async function ee(n){return(await(await fetch(`https://api.thegreenwebfoundation.org/greencheck/${n}`)).json()).green}async function te(n){try{let e="https://api.thegreenwebfoundation.org/v2/greencheckmulti",t=JSON.stringify(n),a=await(await fetch(`${e}/${t}`)).json();return re(a)}catch{return[]}}function re(n){return Object.entries(n).filter(([r,a])=>a.green).map(([r,a])=>a.url)}var H={check:X};function ne(n){return H.check(n)}var k={check:ne};var ae={AFG:"414",ALB:"0",DZA:"528",ASM:"753",AND:"188",AGO:"1476",AIA:"753",ATG:"753",ARG:"478",ARM:"390",ABW:"753",AUS:"808",AUT:"242",AZE:"534","AZORES (PORTUGAL)":"753",BHS:"753",BHR:"726",BGD:"528",BRB:"749",BLR:"400",BEL:"252",BLZ:"403",BEN:"745",BMU:"753",BTN:"0",BOL:"604",BES:"753",BIH:"1197",BWA:"1486",BRA:"284",VGB:"753",BRN:"681",BGR:"911",BFA:"753",BDI:"414",KHM:"1046",CMR:"659",CAN:"372",CYM:"753",CPV:"753",CAF:"188",TCD:"753","CHANNEL ISLANDS (U.K)":"753",CHL:"657",CHN:"899",COL:"410",COM:"753",COD:"0",COG:"659",COK:"753",CRI:"108",CIV:"466",HRV:"294",CUB:"559",CUW:"876",CYP:"751",CZE:"902",DNK:"362",DJI:"753",DMA:"753",DOM:"601",ECU:"560",EGY:"554",SLV:"547",GNQ:"632",ERI:"915",EST:"1057",SWZ:"0",ETH:"0",FLK:"753",FRO:"753",FJI:"640",FIN:"267",FRA:"158",GUF:"423",PYF:"753",GAB:"946",GMB:"753",GEO:"289",DEU:"650",GHA:"495",GIB:"779",GRC:"507",GRL:"264",GRD:"753",GLP:"753",GUM:"753",GTM:"798",GIN:"753",GNB:"753",GUY:"847",HTI:"1048",HND:"662",HUN:"296",ISL:"0",IND:"951",IDN:"783",IRN:"592",IRQ:"1080",IRL:"380",IMN:"436",ISR:"394",ITA:"414",JAM:"711",JPN:"471",JOR:"529",KAZ:"797",KEN:"574",KIR:"753",PRK:"754",KOR:"555",XKX:"1145",KWT:"675",KGZ:"217",LAO:"1069",LVA:"240",LBN:"794",LSO:"0",LBR:"677",LBY:"668",LIE:"151",LTU:"211",LUX:"220",MDG:"876","MADEIRA (PORTUGAL)":"663",MWI:"489",MYS:"551",MDV:"753",MLI:"1076",MLT:"520",MHL:"753",MTQ:"753",MRT:"753",MUS:"700",MYT:"753",MEX:"531",FSM:"753",MDA:"541",MCO:"158",MNG:"1366",MNE:"899",MSR:"753",MAR:"729",MOZ:"234",MMR:"719",NAM:"355",NRU:"753",NPL:"0",NLD:"326",NCL:"779",NZL:"246",NIC:"675",NER:"772",NGA:"526",NIU:"753",MKD:"851",MNP:"753",NOR:"47",OMN:"479",PAK:"592",PLW:"753",PSE:"719",PAN:"477",PNG:"597",PRY:"0",PER:"473",PHL:"672",POL:"828",PRT:"389",PRI:"596",QAT:"503",REU:"772",ROU:"489",RUS:"476",RWA:"712",SHN:"753",KNA:"753",LCA:"753",MAF:"753",SPM:"753",VCT:"753",WSM:"753",SMR:"414",STP:"753",SAU:"592",SEN:"870",SRB:"1086",SYC:"753",SLE:"489",SGP:"379",SXM:"753",SVK:"332",SVN:"620",SLB:"753",SOM:"753",ZAF:"1070",SSD:"890",ESP:"402",LKA:"731",SDN:"736",SUR:"1029",SWE:"68",CHE:"48",SYR:"713",TWN:"484",TJK:"255",TZA:"531",THA:"450",TLS:"753",TGO:"859",TON:"753",TTO:"559",TUN:"468",TUR:"376",TKM:"927",TCA:"753",TUV:"753",UGA:"279",UKR:"768",ARE:"556",GBR:"380",USA:"416",URY:"174",UZB:"612",VUT:"753",VEN:"711",VNM:"560",VIR:"650",YEM:"807",ZMB:"416",ZWE:"1575","MEMO:  EU 27":"409"},ie="marginal",oe="2021",j={data:ae,type:ie,year:oe};var be={co2:Y,hosting:k,averageIntensity:R,marginalIntensity:j};export{R as averageIntensity,Y as co2,be as default,k as hosting,j as marginalIntensity};
//# sourceMappingURL=co2.bundle.mjs.map