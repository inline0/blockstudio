(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,c=[],o=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=wp.components,c=l.PanelBody,o=(l.PanelRow,l.BaseControl,l.Button),u=l.TextControl,s=l.Spinner,m=(l.SelectControl,wp.element),f=(m.render,m.Fragment),p=m.useState,b=m.useEffect,d=m.cloneElement,y=wp.element.render;document.getElementById("fabrikat-plugin")&&y(wp.element.createElement((function(e){var t=i(p(null),2),r=t[0],a=t[1],l=i(p(!1),2),m=l[0],y=l[1],g=i(p(!1),2),w=g[0],v=g[1],h=i(p(!1),2),k=h[0],E=h[1],S=i(p(null),2),O=S[0],j=S[1],P=i(p(null),2),_=P[0],A=P[1];return b((function(){"valid"===fabrikatPlugin.licenseStatus&&fabrikatPlugin.licenseCode&&(y(!0),a(fabrikatPlugin.licenseCode)),j(JSON.parse(fabrikatPlugin.settings)),setTimeout((function(){document.body.classList.add("fabrikat-plugin-loaded")}))}),[]),wp.element.createElement(f,null,wp.element.createElement("div",{className:"fabrikat-plugin".concat(m?"--active":"")},wp.element.createElement("div",{className:"fabrikat-plugin__header"},wp.element.createElement("img",{className:"fabrikat-plugin__header-img",src:"".concat(window.fabrikatPlugin.pluginUrl,"includes/admin/assets/fabrikatLogo.svg")})),wp.element.createElement("div",{className:"fabrikat-plugin__content"},wp.element.createElement(c,{title:"License"},m?wp.element.createElement(u,{type:"password",value:r}):wp.element.createElement(u,{type:"text",placeholder:"Your license key",onChange:function(e){return a(e)}}),wp.element.createElement("div",{className:"fabrikat-plugin__button-wrap"},wp.element.createElement("div",{className:"fabrikat-plugin__button"},wp.element.createElement(o,{onClick:function(){!function(e,t){v(!0),fetch(fabrikatAdmin.ajax,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"action=".concat(fabrikatPlugin.name,"LicenseQuery&type=").concat(e,"&license=").concat(t,"&nonce=").concat(fabrikatAdmin.nonce)}).then((function(e){return e.json()})).then((function(e){e.success&&"valid"===e.license?(y(!0),a(t),E(!1)):"invalid"===e.license?(y(!1),a(""),E(!0)):(document.querySelector(".fabrikat-plugin__content input").value="",y(!1),a(""),E(!1)),v(!1)}))}(m?"deactivate_license":"activate_license",r)},isSecondary:!0},m?"Deactivate license":"Activate license"),w&&wp.element.createElement(s,null)),m&&!k&&wp.element.createElement("span",{className:"fabrikat-plugin__license-notice"},"License activated"),!m&&k&&wp.element.createElement("span",{className:"fabrikat-plugin__license-notice fabrikat-plugin__license-notice--invalid"},"License invalid"))),d(e.children,{settings:O,updateSettings:function(e){j(n(n({},O),e))}}),wp.element.createElement("div",{className:"fabrikat-plugin__button"},wp.element.createElement(o,{onClick:function(e){A(!0),fetch(fabrikatAdmin.ajax,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"action=".concat(fabrikatPlugin.name,"SettingsQuery&settings=").concat(JSON.stringify(O),"&nonce=").concat(fabrikatAdmin.nonce)}).then((function(e){return e.json()})).then((function(e){A(!1)}))},isPrimary:!0},"Save changes"),_&&wp.element.createElement(s,null)))))}),null,wp.element.createElement((function(){return wp.element.createElement("div",{style:{display:"none"}})}),null)),document.getElementById("fabrikat-plugin"))})();